Import('env')

module_env = env.Clone()
module_env.Append(CPPDEFINES=[('SQLITE_ENABLE_RBU', 1)])
module_env.Append(CPPDEFINES=[('SQLITE_USE_URI', 1)])
module_env.Prepend(CPPPATH=['thirdparty/sqlite/'])
module_env.Prepend(CPPPATH=['thirdparty/spmemvfs/'])
module_env.Append(CPPDEFINES=["SQLITE_ENABLE_JSON1"])

env_thirdparty = module_env.Clone()
env_thirdparty.disable_warnings()
env_thirdparty.add_source_files(env.modules_sources, "thirdparty/sqlite/sqlite3.c")
env_thirdparty.add_source_files(env.modules_sources, "thirdparty/spmemvfs/*.c")

env.Append(LIBPATH=['C:/Users/elee/scoop/apps/openssl-mingw/current/lib64', 'C:/Users/elee/Documents/Chibifire/mvsqlite/target/release'])
env.Append(LIBS=['mvsqlite', 'ssl', 'crypto', 'ws2_32', 'bcrypt', 'userenv', 'ntdll'])

module_env.add_source_files(env.modules_sources, "*.cpp")
